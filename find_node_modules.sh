#!/bin/bash

removeFolders() {
	if [ "$1" == "s" ]; then
		echo ""
		echo "Eliminando directorios ...."
		echo ""
		for result in "${results[@]}"; do
			echo "Eliminando en $result"
			rm -rf "$result/node_modules"
		done
		echo ""
		echo "Eliminacion completa."
	else 
		echo ""
		echo "Eliminacion cancelada"
	fi
}

directories=$(find . -maxdepth 1 -type d)

results=();

for dir in $directories; do
	if [ -d "$dir/node_modules" ]; then
		results+=("$dir")
	fi
done


if [ ${#results[@]} -eq 0 ]; then
	echo "No se encontraron node_modules."
else 
	echo ""
	echo "Se encontraron en los siguientes directorios: "

	for result in "${results[@]}"; do
		echo "$result"
	done

	read -p "Â¿Desea eliminar los directorios node_modules? (S/n): " respuesta

	# transform letters to lowercase
	respuesta=${respuesta,,}

	removeFolders "$respuesta"
fi

